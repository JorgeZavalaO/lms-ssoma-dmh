# LMS SSOMA DMH

Sistema de Gesti√≥n de Aprendizaje (LMS) para Seguridad, Salud Ocupacional y Medio Ambiente de DMH.

[![Next.js](https://img.shields.io/badge/Next.js-15.5.5-black)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-6.x-2D3748)](https://www.prisma.io/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.x-38B2AC)](https://tailwindcss.com/)

---

## üìã Descripci√≥n

LMS SSOMA DMH es una plataforma web moderna para la gesti√≥n integral de capacitaciones, colaboradores y recursos relacionados con Seguridad, Salud Ocupacional y Medio Ambiente. El sistema permite administrar usuarios, asignar cursos, gestionar √°reas y puestos, y realizar seguimiento del progreso de capacitaciones.

## ‚ú® Caracter√≠sticas Principales

### üîê Autenticaci√≥n y Autorizaci√≥n
- Sistema de login seguro con NextAuth v5
- Roles de usuario: SUPERADMIN, ADMIN, COLLABORATOR
- Protecci√≥n de rutas por rol
- Sesiones JWT

### üë• Gesti√≥n de Colaboradores
- CRUD completo de colaboradores
- Importaci√≥n masiva (CSV/XLSX)
- Asignaci√≥n a √°reas, sedes y puestos
- Historial de cambios
- Cambio de roles por administrador

### üìö Gesti√≥n de Cursos
- CRUD completo de cursos con estados (BORRADOR, PUBLICADO, ARCHIVADO)
- **C√≥digos autom√°ticos** siguiendo patr√≥n `CRS-XXX` (generados autom√°ticamente al crear cursos)
- Versionado autom√°tico de cursos con historial completo
- Campos: nombre, objetivo, duraci√≥n, modalidad, vigencia, requisitos
- Modalidades: As√≠ncrono, S√≠ncrono, Mixto
- Asignaci√≥n de cursos a colaboradores
- Seguimiento de estado (PENDING, IN_PROGRESS, COMPLETED)
- API para consultas de cursos asignados

### üõ§Ô∏è Rutas de Aprendizaje
- Creaci√≥n de itinerarios de cursos estructurados
- Definici√≥n de prerequisitos entre cursos
- Ordenamiento secuencial de cursos
- Cursos obligatorios y opcionales
- C√°lculo de duraci√≥n total del itinerario
- Gesti√≥n visual de dependencias

- Enforzamiento de prerrequisitos en servidor: si el curso pertenece a una ruta asignada y el prerrequisito no est√° cumplido, el acceso se bloquea y se redirige a `/my-learning-paths`.

Nota t√©cnica: la verificaci√≥n de acceso est√° centralizada en `src/lib/access.ts` mediante `checkCoursePrerequisites(collaboratorId, courseId)` y se aplica en las p√°ginas de curso, lecci√≥n y cuestionario bajo `src/app/(authenticated)/courses/...`.

### üìñ Contenidos y Lecciones (M√≥dulo D)
- **Unidades Did√°cticas**: Organizaci√≥n de contenido en unidades
- **Lecciones Multimedia**: 
  - Videos embebidos (YouTube/Vimeo)
  - Documentos PDF/PPT con visor
  - Contenido HTML interactivo
  - Paquetes SCORM
- **Progreso de Aprendizaje**: 
  - Seguimiento autom√°tico de % visto
  - Marcado de completado configurable
  - Historial de visualizaciones
- **Repositorio de Archivos**:
  - Almacenamiento seguro con Vercel Blob
  - Versionado de archivos
  - Sistema de etiquetas
  - L√≠mites de tama√±o
- **Actividades Interactivas**:
  - Contenido HTML con componentes shadcn
  - Registro de intentos
  - Puntuaci√≥n opcional

### üéØ Inscripciones y Accesos (M√≥dulo E)
- **Asignaci√≥n Autom√°tica por Perfil (E1)**:
  - Reglas de inscripci√≥n basadas en sede/√°rea/puesto
  - Aplicaci√≥n autom√°tica al crear/editar colaboradores
  - Gesti√≥n de reglas activas/inactivas
  - Cancelaci√≥n autom√°tica al cambiar perfil
- **Inscripci√≥n Manual (E2)**:
  - Inscripci√≥n individual de colaboradores
  - Inscripci√≥n masiva por selecci√≥n m√∫ltiple
  - Inscripci√≥n masiva por filtros (sede/√°rea/puesto)
  - Gesti√≥n de notas y seguimiento
  - Control de estado: PENDING, ACTIVE, COMPLETED, CANCELLED
  - Seguimiento de progreso por colaborador

Nota t√©cnica: el m√≥dulo E incluye APIs RESTful para gesti√≥n de reglas (`/api/enrollment-rules`) e inscripciones (`/api/enrollments`), utilidades en `src/lib/enrollment.ts` y validaciones en `src/validations/enrollment.ts`.

### üìù Evaluaciones Automatizadas (M√≥dulo F)
- **Banco de Preguntas (F1)**:
  - 5 tipos de preguntas: Opci√≥n √∫nica, Opci√≥n m√∫ltiple, Verdadero/Falso, Ordenar, Completar
  - Metadatos: tema, dificultad, √≠ndice de discriminaci√≥n
  - Feedback personalizado por respuesta
  - Explicaciones detalladas
  - API CRUD completa con validaciones
  - UI profesional con shadcn/ui
- **Cuestionarios (F2)**:
  - Configuraci√≥n avanzada: tiempo l√≠mite, intentos m√°ximos, nota m√≠nima
  - Aleatorizaci√≥n de preguntas y opciones
  - Pool de preguntas por intento
  - Pol√≠ticas de visualizaci√≥n configurables
  - Estados: BORRADOR, PUBLICADO, ARCHIVADO
- **Calificaci√≥n Autom√°tica (F3)**:
  - Inicio y env√≠o de intentos con validaciones
  - Calificaci√≥n autom√°tica seg√∫n tipo de pregunta
  - C√°lculo de score, puntos y tiempo empleado
  - Estados: EN_PROGRESO, ENVIADO, CALIFICADO, APROBADO, REPROBADO
  - Vista de resultados con feedback
- **Reintentos y Remediaci√≥n (F3.1)**:
  - Bloqueo de reintento si no aprueba
  - Contenido de refuerzo antes de reintentar
  - Marcado de remediaci√≥n completada
- **Banco por Versi√≥n (F4)**:
  - Pool de preguntas espec√≠fico por versi√≥n de curso
  - M√©tricas de dificultad y discriminaci√≥n

Nota t√©cnica: el m√≥dulo F incluye 8 endpoints REST, validaciones Zod en `src/validations/quiz.ts`, y 10+ componentes shadcn/ui para experiencia profesional.

### üìä Progreso y Cumplimiento (M√≥dulo H)
- **Tracking de Avance (H1)**:
  - Progreso por curso: porcentaje, tiempo empleado, √∫ltima actividad
  - Progreso por lecci√≥n: visualizaciones, completado autom√°tico
  - Progreso por ruta de aprendizaje: cursos completados/totales
  - Estados: NO_INICIADO, EN_PROGRESO, APROBADO, DESAPROBADO, VENCIDO, EXONERADO
  - C√°lculo autom√°tico basado en lecciones y quizzes
- **Cumplimiento por Vigencia (H2)**:
  - Cursos con fecha de caducidad configurable
  - Certificaciones con validez temporal
  - Cadena de recertificaci√≥n (certificaci√≥n ‚Üí recertificaci√≥n)
  - Revocaci√≥n de certificaciones con raz√≥n
  - Sistema de alertas multi-nivel (info, warning, critical)
  - Alertas autom√°ticas: cursos pr√≥ximos a vencer (30 d√≠as), vencidos, recertificaci√≥n requerida (60 d√≠as)
- **Gesti√≥n de Estados (H3)**:
  - Transiciones autom√°ticas de estado seg√∫n progreso
  - Exoneraci√≥n de colaboradores con justificaci√≥n
  - Cambio manual de estado (admin)
  - Fechas de tracking: inicio, completado, aprobado, desaprobado, vencido, certificado, exonerado
  - Auditor√≠a de cambios de estado

Nota t√©cnica: el m√≥dulo H incluye 15 endpoints REST en `/api/progress`, validaciones en `src/validations/progress.ts`, 5 modelos Prisma (CourseProgress, CertificationRecord, ProgressAlert, LearningPathProgress + LessonProgress reutilizado), 2 enums (ProgressStatus, AlertType), y sistema de alertas autom√°ticas con job manual.

### üîî Notificaciones y Recordatorios (M√≥dulo I)
- **Email y Bandeja Interna (I1)**:
  - 8 tipos de eventos: nueva inscripci√≥n, recordatorios (30/7/1 d√≠as), desaprobaci√≥n, certificado listo, recertificaci√≥n pr√≥xima, resumen de equipo
  - Plantillas editables con 20+ variables din√°micas
  - Canales configurables: EMAIL, IN_APP, BOTH
  - Sistema de preferencias opt-in/out por tipo de notificaci√≥n
  - Bandeja interna con estados (le√≠do/no le√≠do/archivado)
  - Contador en tiempo real de notificaciones no le√≠das
  - Componente NotificationBell con icono de campana
  - UI moderna con shadcn/ui
- **Recordatorios al Jefe (I2)**:
  - Resumen semanal autom√°tico de pendientes del equipo
  - Estad√≠sticas agregadas por √°rea/sede
  - Detecci√≥n de cursos pr√≥ximos a vencer (30/7 d√≠as)
  - Generaci√≥n programable mediante cron job
  - Dashboard de equipo para jefes
  - Filtros por colaborador y rango de fechas

Nota t√©cnica: el m√≥dulo I incluye 11 endpoints REST en `/api/notification-templates`, `/api/notifications`, `/api/notification-preferences`, validaciones en `src/validations/notification.ts`, 4 modelos Prisma (NotificationTemplate, Notification, NotificationPreference, NotificationLog), 3 enums (NotificationEvent, NotificationChannel, NotificationStatus), servicio completo en `src/lib/notifications.ts` con funciones para env√≠o por email/in-app y generaci√≥n de res√∫menes.

### ÔøΩ Certificados (Emisi√≥n y Verificaci√≥n P√∫blica) (M√≥dulo K)
- **Emisi√≥n Autom√°tica de Certificados PDF (K1)**:
  - Generaci√≥n profesional con `@react-pdf/renderer` en dise√±o landscape (A4 horizontal)
  - Plantilla con bordes dobles, marca de agua "SSOMA", y layout estructurado
  - Informaci√≥n completa: nombre colaborador, DNI, curso, nota (%), horas, fecha emisi√≥n/vencimiento
  - C√≥digo de verificaci√≥n √∫nico de 16 caracteres (hex uppercase, crypto.randomBytes)
  - QR code para verificaci√≥n r√°pida (300x300px, apunta a /verify/[code])
  - N√∫mero de certificado √∫nico indexado en base de datos
  - Firma digital del responsable de SSOMA
  - Renderizado server-side con `renderToBuffer()`, descarga on-demand
  - API: POST `/api/certificates/generate` (solo ADMIN), GET `/api/certificates/[id]/download`
- **Verificaci√≥n P√∫blica (K2)**:
  - P√°gina p√∫blica `/verify/[code]` accesible sin autenticaci√≥n
  - Verificaci√≥n instant√°nea por c√≥digo manual o escaneo QR
  - Estados visuales claros: ‚úÖ Verde (v√°lido), ‚ö†Ô∏è Amarillo (expirado), ‚ùå Rojo (no encontrado)
  - Informaci√≥n p√∫blica m√≠nima (sin datos sensibles): certificateNumber, colaboratorName, courseName, issuedAt, expiresAt, courseHours, score, isValid
  - Validaci√≥n de vigencia: campo `isValid` + fecha de expiraci√≥n vs fecha actual
  - Dise√±o responsivo mobile-first con gradientes y badges sem√°nticos
  - API: GET `/api/certificates/verify/[code]` (endpoint p√∫blico)
- **Administraci√≥n de Certificados**:
  - Panel `/admin/certificates` para gesti√≥n (solo ADMIN)
  - Listado completo de certificados emitidos con tabla
  - Columnas: N¬∞ Certificado, Colaborador (nombre + DNI), Curso, Emisi√≥n, Estado (badge v√°lido/inv√°lido)
  - Acciones: Generar PDF (si no existe), Descargar PDF, Ver p√°gina de verificaci√≥n p√∫blica
  - Filtros por colaborador, curso, estado de validez, rango de fechas
  - API: GET `/api/certificates` con query params para filtros
- **Almacenamiento y Seguridad**:
  - Prisma schema extendido: `pdfUrl String?`, `verificationCode String? @unique`, `qrCode String?`, `pdfMetadata Json?`
  - Migraci√≥n: `20251017060346_add_certificate_pdf_fields`
  - C√≥digos √∫nicos con √≠ndice para evitar duplicados
  - Generaci√≥n segura con crypto (2^64 combinaciones)
  - Solo expone datos p√∫blicos m√≠nimos en verificaci√≥n
  - Autorizaci√≥n: generaci√≥n solo ADMIN, descarga autenticado, verificaci√≥n p√∫blico

Nota t√©cnica: el m√≥dulo K incluye 4 endpoints REST en `/api/certificates/*`, validaciones en `src/validations/certificates.ts`, extensi√≥n del modelo `CertificationRecord` con 4 campos nuevos, servicio en `src/lib/certificates.ts` con 6 funciones (240 l√≠neas), componente template en `src/components/certificates/certificate-template.tsx` (260 l√≠neas), 2 p√°ginas (admin + verify), dependencias: @react-pdf/renderer 4.3.1, qrcode 1.5.4, total 1220 l√≠neas de c√≥digo.

### ÔøΩüìä Reportes (√Åreas, Curso, Cumplimiento) (M√≥dulo J)
- **Dashboard Ejecutivo (J1)**:
  - 15+ KPIs en tiempo real: % cumplimiento, alertas cr√≠ticas, intentos promedio, tasa de aprobaci√≥n, NPS
  - 4 visualizaciones interactivas con recharts: compliance por √°rea (BarChart), distribuci√≥n de alertas (PieChart), tendencia de inscripciones (AreaChart), tendencia de completados (LineChart)
  - Filtros temporales (7/30/90 d√≠as/todo) y organizacionales (√°rea/sede)
  - Top 5 cursos cr√≠ticos con contadores de vencidos/pr√≥ximos
  - Indicadores de tendencia (‚Üë/‚Üì) comparando periodos
  - Auto-refresh al cambiar filtros
- **Reporte por √Årea (J2)**:
  - Tabla con 8 columnas: DNI, nombre, √°rea, posici√≥n, curso, estado, progreso %, score
  - Filtros avanzados: √°rea, sede, posici√≥n, estado, curso, rango de fechas
  - Badges sem√°nticos por estado con colores
  - Contador de registros
  - Bot√≥n de exportaci√≥n XLSX preparado
- **Reporte por Curso (J3)**:
  - Estad√≠sticas completas: inscritos, % completado, % aprobaci√≥n + promedio, tiempo promedio
  - Gr√°fico de distribuci√≥n de scores (5 rangos: 0-40, 41-60, 61-80, 81-90, 91-100)
  - Gr√°fico de distribuci√≥n de estados con colores sem√°nticos
  - Selector de curso con flujo de 2 pasos
  - Exportaci√≥n PDF preparada
- **Reporte de Cumplimiento Legal/SSOMA (J4)**:
  - Matriz de colaboradores √ó cursos obligatorios
  - Sem√°foro de tr√°fico: üü¢ Cumple (>30 d√≠as), üü° Por vencer (7-30 d√≠as), üî¥ Vencido (<7 d√≠as o sin certificar)
  - Indicadores de d√≠as hasta vencimiento
  - Resumen con m√©tricas: total, cumpliendo, por vencer, vencidos
  - Scroll horizontal para muchos cursos
  - Leyenda explicativa del sem√°foro
- **Trazabilidad de Evaluaciones (J5)**:
  - B√∫squeda en tiempo real (DNI/nombre/curso)
  - Tabla de auditor√≠a con 10 columnas: timestamp, DNI, nombre, curso, quiz, duraci√≥n (formato Xm Ys), score, estado, respuestas, IP
  - Informaci√≥n de retenci√≥n y privacidad
  - Exportaci√≥n CSV preparada
  - Auditor√≠a completa para compliance

Nota t√©cnica: el m√≥dulo J incluye 5 endpoints REST en `/api/reports/*`, validaciones en `src/validations/reports.ts`, 4 modelos Prisma (Report, ReportSchedule, ReportExecution, KPISnapshot), 3 enums (ReportType, ReportFormat, ScheduleFrequency), servicio con 6 funciones (600+ l√≠neas) en `src/lib/reports.ts`, dependencias: recharts 2.x, date-fns 3.x, shadcn/ui chart component.

### üè† Landing Page y Reorganizaci√≥n de Rutas (Octubre 2025 - v2.0)
- **Landing Page en Ra√≠z (`/`)**: P√°gina de presentaci√≥n p√∫blica con hero, features, benefits, CTA y footer
  - Accesible sin autenticaci√≥n
  - Dise√±o profesional con gradientes y grid responsivo
  - Botones de CTA apuntando a /login y #features
  - Arquitectura: `src/app/page.tsx`

- **Reorganizaci√≥n con Route Groups**:
  - `/(public)/` - Rutas p√∫blicas sin sidebar: `/login`, `/register`
  - `/(authenticated)/` - Rutas protegidas con sidebar y header: todos los m√≥dulos admin
  - Dashboard movido a `/dashboard` (con sidebar y KPIs din√°micos)
  - Layout ra√≠z simplificado a solo SessionProvider + Toaster

- **Beneficios Arquitect√≥nicos**:
  - Separaci√≥n clara de concerns: p√∫blico vs autenticado
  - Diferentes layouts por grupo de rutas
  - Sidebar visible solo en rutas autenticadas
  - Mejor organizaci√≥n del c√≥digo
  - Escalable para agregar m√°s grupos (ej: `/super-admin/`)

### üë• Portal del Colaborador (Octubre 2025)
- **Mis Cursos**: Visualizaci√≥n de cursos asignados con progreso detallado
  - Tabs: Disponibles, En Progreso, Completados, Historial
  - Tarjetas con: nombre curso, progreso %, estado, acciones
  - Botones: Iniciar, Continuar, Ver Resultados
  - Filtros por curso y estado

- **Evaluaciones**: Gesti√≥n centralizada de evaluaciones
  - Bandeja de evaluaciones activas: tiempo l√≠mite, intentos disponibles, nota m√≠nima
  - Pantalla de examen integrada
  - Resultados con: nota, retroalimentaci√≥n, opci√≥n de remediaci√≥n/reintento
  - 4 tabs: Disponibles, En Progreso, Aprobadas, Historial
  - Stat cards: Total, En Progreso, Aprobadas, Historial

- **Certificados**: Gesti√≥n de certificaciones obtenidas
  - Listado con: curso, versi√≥n, fecha emisi√≥n, vigencia (badge: vigente/por vencer/vencido)
  - Acciones: Descargar PDF, Verificar (link p√∫blico/QR)
  - Hist√≥rico de certificados (incluye vencidos)
  - 3 tabs: Vigentes, Vencidos, Historial Completo
  - Stat cards: Total, Vigentes, Por Vencer, Vencidos
  - Validaci√≥n de fechas con umbrales de 30 d√≠as

- **Notificaciones**: Centro de notificaciones integrado
  - Bandeja interna: asignaciones nuevas, recordatorios de vencimiento (30/7/1 d√≠as), resultado de evaluaciones, certificado disponible
  - Preferencias granulares (opt-in por tipo de notificaci√≥n)
  - Contador en tiempo real en sidebar (badge rojo destructive)
  - Auto-refresh cada 10 segundos
  - Event listeners para actualizaciones instant√°neas
  - 3 tabs: Todas, No Le√≠das, Archivadas
  - Stat cards: Total, No Le√≠das, Le√≠das, Archivadas
  - 8 tipos de notificaci√≥n configurables: Cursos, Evaluaciones, Certificados, Recordatorios, Gesti√≥n, Anuncios

- **Perfil**: Datos personales y organizacionales
  - Informaci√≥n Personal (solo lectura o editable seg√∫n pol√≠tica): nombre, DNI, email, √°rea, puesto, sede
  - Informaci√≥n Organizacional: sede, √°rea, puesto (administrado por RRHH)
  - Estado: Activo/Inactivo
  - Estad√≠sticas: ID Usuario, ID Colaborador, Antig√ºedad
  - Avatar personalizadas con iniciales

Nota t√©cnica: Portal completamente integrado con navegaci√≥n en sidebar (5 links: Cursos, Evaluaciones, Certificados, Notificaciones, Perfil), contador de notificaciones en tiempo real, acceso filtrado por sesi√≥n del usuario, validaciones de rol COLLABORATOR. Build exitoso: 77 rutas (optimizado tras consolidaci√≥n).

### üìä Consolidaci√≥n de Reportes y Optimizaci√≥n (Octubre 2025)
- **Consolidaci√≥n de Excel Export en Dashboard Ejecutivo**:
  - Movida funcionalidad de descarga Excel desde `/reports/collaborators` al Dashboard Ejecutivo (`/reports/dashboard`)
  - Eliminaci√≥n de p√°gina redundante `/reports/collaborators` (reducci√≥n de 79 a 77 rutas)
  - Unificaci√≥n de funcionalidad: un solo lugar para descargar reportes de colaboradores
  - Mejora de UX: descarga directa desde dashboard sin navegaci√≥n adicional

- **Renombrado de Endpoint para Claridad**:
  - `/api/reports/collaborators-progress` ‚Üí `/api/reports/export-collaborators-excel`
  - Nombre refleja mejor la funci√≥n: genera archivo Excel, no solo consulta datos JSON
  - Arquitectura m√°s clara: endpoints de exportaci√≥n vs endpoints de consulta
  - Mantiene funcionalidad completa: 3 hojas (Resumen, Colaboradores, Detalle Cursos)

- **Correcci√≥n de Bugs en Dashboard Ejecutivo**:
  - **C√°lculos corregidos**: 5 errores de divisi√≥n por cero con fallbacks `|| 1`
  - **Precedencia de operadores**: Corregida en c√°lculos de alertas y cursos cr√≠ticos
  - **Progreso invertido**: Barra de progreso ahora muestra `completionRate` en lugar de `100 - completionRate`
  - **Botones funcionales**: Implementados handlers para "Ver detalles" (navega a `/admin/courses/${courseId}/content`)
  - **Estado de carga**: Bot√≥n de descarga Excel muestra `disabled={refreshing}` durante proceso

- **Tracking de Progreso para Contenido No-Video**:
  - **ContentProgressTracker**: Componente para PDF/PPT/HTML/SCORM con polling de 30s
  - **Anti-spam validaci√≥n**: Cliente (no rollback) + Servidor (Math.max validation)
  - **Detecci√≥n de actividad**: Visibility API + auto-pause (2min inactividad) + throttling
  - **Complementa YouTubePlayer**: Video (2s polling, ‚â•5% threshold) + Documentos (30s polling)

- **Optimizaci√≥n de Build y Arquitectura**:
  - Build exitoso: 77 rutas generadas, compilaci√≥n en 14.8s, sin errores cr√≠ticos
  - ESLint: Solo warnings pre-existentes (no nuevos errores)
  - Eliminaci√≥n de c√≥digo redundante: 2 rutas eliminadas, arquitectura m√°s limpia
  - Mantenimiento de APIs de progreso: `/api/progress/courses`, `/api/progress/paths`, etc.

Nota t√©cnica: Consolidaci√≥n reduce complejidad manteniendo funcionalidad completa. Excel export genera 3-sheet workbook con KPIs, colaboradores y detalle de cursos. Dashboard Ejecutivo ahora centraliza reportes y exportaciones.

### üè¢ Administraci√≥n
- Gesti√≥n de √°reas con jefes de √°rea
- Gesti√≥n de puestos de trabajo
- Gesti√≥n de sedes
- Dashboard con m√©tricas

### üé® Interfaz de Usuario
Nota: muchos componentes de la interfaz se generaron y organizaron usando el flujo MCP de `shadcn/ui` para mantener un estilo moderno, consistente y profesional entre los distintos m√≥dulos (modales, formularios, badges y layouts).

---

## üõ†Ô∏è Stack Tecnol√≥gico

### Frontend
- **Next.js 15.5.5** - Framework React con App Router
- **TypeScript** - Tipado est√°tico
- **Tailwind CSS** - Estilos utilitarios
- **shadcn/ui** - Componentes de UI
- **Lucide React** - Iconos

### Backend
- **Next.js API Routes** - Endpoints RESTful
- **NextAuth v5** - Autenticaci√≥n
- **Prisma** - ORM para base de datos
- **PostgreSQL** - Base de datos relacional
- **Zod** - Validaci√≥n de esquemas

### Herramientas
- **Turbopack** - Bundler r√°pido
- **ESLint** - Linting
- **pnpm** - Gestor de paquetes

---

## ÔøΩ Documentaci√≥n

- `docs/README_DOCS.md`: √≠ndice de navegaci√≥n y mapa de archivos.
- `docs/DOCUMENTATION_MANAGEMENT.md`: pol√≠ticas de mantenimiento, responsables y checklist.
- `docs/COLLABORATOR_FEATURES.md`: gu√≠a completa del Portal del Colaborador.
- `docs/TROUBLESHOOTING.md`: resoluci√≥n de problemas frecuentes.

> Solo se mantienen `README.md` y `CHANGELOG.md` en la ra√≠z; el resto de documentaci√≥n vive en `docs/`.

---

## ÔøΩüöÄ Inicio R√°pido

### Prerrequisitos

- Node.js 18+ 
- pnpm (recomendado) o npm
- PostgreSQL 14+

### Instalaci√≥n

1. **Clonar el repositorio**
   ```bash
   git clone <repository-url>
   cd lms-ssoma-dmh
   ```

2. **Instalar dependencias**
   ```bash
   pnpm install
   ```

3. **Configurar variables de entorno**
   
   Crear archivo `.env` en la ra√≠z del proyecto:
   ```env
   # Database
   DATABASE_URL="postgresql://user:password@localhost:5432/lms_ssoma"
   
   # NextAuth
   NEXTAUTH_URL="http://localhost:3000"
   NEXTAUTH_SECRET="your-secret-key-here"
   ```

4. **Configurar base de datos**
   ```bash
   # Ejecutar migraciones
   pnpm prisma migrate dev
   
   # (Opcional) Seed inicial
   pnpm prisma db seed
   ```

5. **Iniciar servidor de desarrollo**
   ```bash
   pnpm dev
   ```

6. **Abrir en navegador**
   
   Ir a [http://localhost:3000](http://localhost:3000)

---

## üìÅ Estructura del Proyecto

```
lms-ssoma-dmh/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # Modelo de datos
‚îÇ   ‚îî‚îÄ‚îÄ migrations/            # Migraciones de BD
‚îú‚îÄ‚îÄ public/                    # Archivos est√°ticos
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                   # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # Landing page (p√∫blico, ra√≠z /)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # Layout global (SessionProvider)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (public)/          # Route group: rutas p√∫blicas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx     # Layout sin sidebar
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/page.tsx # Login con 2-column grid
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/page.tsx # Registro
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (authenticated)/   # Route group: rutas autenticadas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx     # Layout con sidebar
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboard/page.tsx # Dashboard KPIs (/dashboard)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/               # API Routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/          # Endpoints de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collaborators/ # CRUD colaboradores
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ courses/       # CRUD cursos
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ learning-paths/# CRUD rutas de aprendizaje
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ units/         # CRUD unidades
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lessons/       # CRUD lecciones
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ files/         # Repositorio de archivos
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activities/    # Actividades interactivas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ areas/         # CRUD √°reas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ positions/     # CRUD puestos
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sites/         # CRUD sedes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/             # P√°ginas de administraci√≥n
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collaborators/ # Admin colaboradores
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ courses/       # Admin cursos
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/content/ # Contenidos del curso
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ learning-paths/# Admin rutas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ areas/         # Admin √°reas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ positions/     # Admin puestos
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sites/         # Admin sedes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # Dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/             # P√°gina de login
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/          # P√°gina de registro
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sidebar/           # Componentes del sidebar
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app-sidebar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nav-user.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                # Componentes shadcn/ui
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app-header.tsx     # Header global
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app-footer.tsx     # Footer global
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data-table.tsx     # Tabla reutilizable
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prisma.ts          # Cliente Prisma
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.ts           # Utilidades
‚îÇ   ‚îú‚îÄ‚îÄ validations/           # Esquemas Zod
‚îÇ   ‚îú‚îÄ‚îÄ types/                 # Tipos TypeScript
‚îÇ   ‚îî‚îÄ‚îÄ auth.ts                # Configuraci√≥n NextAuth
‚îú‚îÄ‚îÄ .env                       # Variables de entorno
‚îú‚îÄ‚îÄ components.json            # Config shadcn/ui
‚îú‚îÄ‚îÄ next.config.ts             # Config Next.js
‚îú‚îÄ‚îÄ tsconfig.json              # Config TypeScript
‚îú‚îÄ‚îÄ tailwind.config.ts         # Config Tailwind
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ CHANGELOG.md               # Historial de cambios
‚îî‚îÄ‚îÄ README.md                  # Este archivo
```

---

## üîë Variables de Entorno

Crear un archivo `.env` con las siguientes variables:

```env
# Base de datos PostgreSQL
DATABASE_URL="postgresql://user:password@localhost:5432/lms_ssoma"

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="genera-un-secret-seguro-aqui"

# (Opcional) Configuraci√≥n adicional
NODE_ENV="development"
```

---

## üìú Scripts Disponibles

```bash
# Desarrollo
pnpm dev              # Iniciar servidor de desarrollo (Turbopack)

# Build
pnpm build            # Crear build de producci√≥n
pnpm start            # Iniciar servidor de producci√≥n

# Database
pnpm prisma studio    # Abrir Prisma Studio (UI para BD)
pnpm prisma generate  # Generar cliente Prisma
pnpm prisma migrate dev    # Ejecutar migraciones en dev
pnpm prisma migrate deploy # Ejecutar migraciones en prod

# Linting
pnpm lint             # Ejecutar ESLint
```

---

## üîê Roles y Permisos

| Rol | Descripci√≥n | Permisos |
|-----|-------------|----------|
| **SUPERADMIN** | Administrador total del sistema | Acceso completo a todas las funcionalidades |
| **ADMIN** | Administrador de empresa/√°rea | Gesti√≥n de colaboradores, cursos, √°reas |
| **COLLABORATOR** | Usuario final | Ver cursos asignados, completar capacitaciones |

---

## üóÑÔ∏è Modelo de Datos Principal

```prisma
User                  # Usuarios del sistema
‚îú‚îÄ‚îÄ Collaborator      # Colaboradores de la empresa
‚îÇ   ‚îú‚îÄ‚îÄ Site          # Sedes/ubicaciones
‚îÇ   ‚îú‚îÄ‚îÄ Area          # √Åreas de trabajo
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AreaHead  # Jefes de √°rea
‚îÇ   ‚îú‚îÄ‚îÄ Position      # Puestos de trabajo
‚îÇ   ‚îú‚îÄ‚îÄ CollaboratorHistory  # Historial de cambios
‚îÇ   ‚îú‚îÄ‚îÄ CourseAssignment     # Cursos asignados (deprecado, usar Enrollment)
‚îÇ   ‚îú‚îÄ‚îÄ Enrollment    # Inscripciones E1/E2
‚îÇ   ‚îú‚îÄ‚îÄ CourseProgress       # Progreso H1
‚îÇ   ‚îú‚îÄ‚îÄ CertificationRecord  # Certificaciones H2
‚îÇ   ‚îî‚îÄ‚îÄ ProgressAlert        # Alertas H2
‚îú‚îÄ‚îÄ Course            # Cat√°logo de cursos
‚îÇ   ‚îú‚îÄ‚îÄ CourseVersion # Historial de versiones
‚îÇ   ‚îú‚îÄ‚îÄ CourseAssignments    # Asignaciones (deprecado)
‚îÇ   ‚îú‚îÄ‚îÄ Enrollment    # Inscripciones vigentes
‚îÇ   ‚îú‚îÄ‚îÄ Unit          # Unidades did√°cticas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Lesson    # Lecciones (VIDEO, PDF, PPT, HTML, SCORM)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ LessonProgress  # Progreso de lecciones H1
‚îÇ   ‚îú‚îÄ‚îÄ Quiz          # Cuestionarios F2
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Question  # Preguntas F1
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ QuizAttempt       # Intentos F3
‚îÇ   ‚îú‚îÄ‚îÄ CourseProgress       # Progreso de cursos H1
‚îÇ   ‚îú‚îÄ‚îÄ CertificationRecord  # Certificaciones H2
‚îÇ   ‚îî‚îÄ‚îÄ ProgressAlert        # Alertas H2
‚îú‚îÄ‚îÄ LearningPath      # Rutas de aprendizaje
‚îÇ   ‚îú‚îÄ‚îÄ LearningPathCourse   # Cursos en ruta con prerequisitos
‚îÇ   ‚îî‚îÄ‚îÄ LearningPathProgress # Progreso de rutas H1
‚îú‚îÄ‚îÄ FileRepository    # Repositorio de archivos versionados
‚îú‚îÄ‚îÄ InteractiveActivity      # Actividades interactivas
‚îÇ   ‚îî‚îÄ‚îÄ ActivityAttempt      # Intentos de actividades
‚îî‚îÄ‚îÄ EnrollmentRule    # Reglas de inscripci√≥n autom√°tica E1
```

---

## üåê API Endpoints

### Autenticaci√≥n
- `POST /api/auth/signin` - Iniciar sesi√≥n
- `POST /api/auth/signout` - Cerrar sesi√≥n
- `POST /api/register` - Registro de usuario

### Colaboradores
- `GET /api/collaborators` - Listar colaboradores (paginado)
- `POST /api/collaborators` - Crear colaborador
- `GET /api/collaborators/:id` - Obtener colaborador
- `PUT /api/collaborators/:id` - Actualizar colaborador
- `DELETE /api/collaborators/:id` - Eliminar colaborador
- `POST /api/collaborators/import` - Importar desde CSV/XLSX
- `GET /api/collaborators/template` - Descargar plantilla

### Cursos
- `GET /api/courses` - Listar cursos (filtros por estado)
- `POST /api/courses` - Crear curso (crea versi√≥n 1 autom√°ticamente)
- `GET /api/courses/:id` - Obtener curso con versiones
- `PUT /api/courses/:id` - Actualizar curso (versionado autom√°tico)
- `DELETE /api/courses/:id` - Eliminar curso
- `POST /api/courses/:id/assign` - Asignar curso a colaboradores
- `GET /api/courses/assigned` - Cursos asignados de un colaborador

### Rutas de Aprendizaje
- `GET /api/learning-paths` - Listar rutas
- `POST /api/learning-paths` - Crear ruta
- `GET /api/learning-paths/:id` - Obtener ruta con cursos
- `PUT /api/learning-paths/:id` - Actualizar ruta
- `DELETE /api/learning-paths/:id` - Eliminar ruta
- `POST /api/learning-paths/:id/courses` - Agregar curso a ruta
- `DELETE /api/learning-paths/:id/courses` - Quitar curso de ruta

### Contenidos (M√≥dulo D)
- `GET /api/courses/:id/units` - Listar unidades de un curso
- `POST /api/courses/:id/units` - Crear unidad
- `GET /api/units/:id` - Obtener unidad
- `PUT /api/units/:id` - Actualizar unidad
- `DELETE /api/units/:id` - Eliminar unidad
- `GET /api/units/:id/lessons` - Listar lecciones de una unidad
- `POST /api/units/:id/lessons` - Crear lecci√≥n
- `GET /api/lessons/:id` - Obtener lecci√≥n
- `PUT /api/lessons/:id` - Actualizar lecci√≥n
- `DELETE /api/lessons/:id` - Eliminar lecci√≥n
- `GET /api/lessons/:id/progress` - Obtener progreso de lecci√≥n
- `PUT /api/lessons/:id/progress` - Actualizar progreso de lecci√≥n
- `GET /api/files` - Listar archivos (con filtros)
- `POST /api/files` - Subir archivo
- `GET /api/activities` - Listar actividades interactivas
- `POST /api/activities` - Crear actividad

### Inscripciones (M√≥dulo E)
- `GET /api/enrollment-rules` - Listar reglas de inscripci√≥n
- `POST /api/enrollment-rules` - Crear regla (aplica autom√°ticamente)
- `GET /api/enrollment-rules/:id` - Obtener regla
- `PUT /api/enrollment-rules/:id` - Actualizar regla (activar/desactivar)
- `DELETE /api/enrollment-rules/:id` - Eliminar regla (cancela inscripciones)
- `GET /api/enrollments` - Listar inscripciones (con filtros)
- `POST /api/enrollments` - Inscripci√≥n manual individual/m√∫ltiple
- `POST /api/enrollments/bulk` - Inscripci√≥n masiva por filtros
- `GET /api/enrollments/:id` - Obtener inscripci√≥n
- `PUT /api/enrollments/:id` - Actualizar inscripci√≥n
- `DELETE /api/enrollments/:id` - Eliminar inscripci√≥n

### Progreso y Cumplimiento (M√≥dulo H)
- `GET /api/progress/courses` - Listar progreso de cursos (con filtros)
- `POST /api/progress/courses` - Inicializar progreso de curso
- `GET /api/progress/courses/:id` - Obtener progreso de curso
- `PUT /api/progress/courses/:id` - Actualizar progreso de curso
- `DELETE /api/progress/courses/:id` - Eliminar progreso (admin)
- `POST /api/progress/courses/:id/exempt` - Exonerar colaborador (admin)
- `GET /api/progress/certifications` - Listar certificaciones
- `POST /api/progress/certifications` - Emitir certificaci√≥n (admin)
- `GET /api/progress/certifications/:id` - Obtener certificaci√≥n con historial
- `POST /api/progress/certifications/:id/revoke` - Revocar certificaci√≥n (admin)
- `POST /api/progress/certifications/:id/recertify` - Crear recertificaci√≥n (admin)
- `GET /api/progress/alerts` - Listar alertas de cumplimiento
- `POST /api/progress/alerts` - Crear alerta manual (admin)
- `PUT /api/progress/alerts/:id/read` - Marcar alerta como le√≠da
- `PUT /api/progress/alerts/:id/dismiss` - Descartar alerta
- `POST /api/progress/alerts/generate` - Generar alertas autom√°ticas (cron/admin)
- `PUT /api/progress/lessons/:lessonId` - Actualizar progreso de lecci√≥n
- `GET /api/progress/paths` - Obtener progreso de rutas de aprendizaje
- `POST /api/progress/paths` - Crear/actualizar progreso de ruta

### √Åreas
- `GET /api/areas` - Listar √°reas
- `POST /api/areas` - Crear √°rea
- `POST /api/areas/:id/head` - Asignar jefe de √°rea

### Puestos
- `GET /api/positions` - Listar puestos
- `POST /api/positions` - Crear puesto

---

## üé® Componentes UI Principales

### Sidebar
- Componente colapsible responsive
- Navegaci√≥n condicional por rol
- Integraci√≥n con NextAuth para datos de usuario
- Tooltips en modo icon

### Header
- Breadcrumbs din√°micos basados en ruta
- SidebarTrigger para mobile
- Separador visual

### Footer
- Grid responsive (4 columnas)
- Enlaces r√°pidos, recursos, contacto
- Copyright din√°mico

### DataTable
- Tabla reutilizable con paginaci√≥n
- B√∫squeda integrada
- Ordenamiento de columnas

---

## ÔøΩ Documentaci√≥n

La documentaci√≥n completa se organiza en tres archivos principales en la carpeta `docs/`:

### 1. **[docs/MODULES.md](./docs/MODULES.md)** - Descripci√≥n de M√≥dulos
Descripci√≥n funcional de todos los m√≥dulos del sistema (10 m√≥dulos completos):
- M√≥dulo K: Certificados (Emisi√≥n y Verificaci√≥n P√∫blica) ‚≠ê **NUEVO**
- M√≥dulo J: Reportes (√Åreas, Curso, Cumplimiento)
- M√≥dulo I: Notificaciones y Recordatorios
- M√≥dulo H: Progreso y Cumplimiento
- M√≥dulo F: Evaluaciones Automatizadas
- M√≥dulo E: Inscripciones y Accesos
- M√≥dulo D: Contenidos Interactivos
- M√≥dulo C: Cat√°logo de Cursos
- M√≥dulo B: Rutas de Aprendizaje
- M√≥dulo A: Usuarios y Autenticaci√≥n

**√ösalo para**: Entender qu√© hace cada m√≥dulo y sus caracter√≠sticas principales.

### 2. **[docs/API_REFERENCE.md](./docs/API_REFERENCE.md)** - Referencia de API
Referencia t√©cnica completa de 99+ endpoints REST:
- M√≥dulo K: Certificados (4 endpoints) ‚≠ê **NUEVO**
- M√≥dulo J: Reportes (5 endpoints)
- M√≥dulo I: Notificaciones (11 endpoints)
- M√≥dulo H: Progreso (15 endpoints)
- M√≥dulo F: Evaluaciones (8 endpoints)
- Todos los m√≥dulos anteriores
- C√≥digos de error y headers
- Ejemplos de request/response

**√ösalo para**: Integraci√≥n con la API, request/response examples, debugging.

### 3. **[docs/IMPLEMENTATION_NOTES.md](./docs/IMPLEMENTATION_NOTES.md)** - Notas T√©cnicas
Detalles de implementaci√≥n, arquitectura y decisiones t√©cnicas:
- Estructura del proyecto
- Base de datos y Prisma (39+ modelos)
- Autenticaci√≥n y validaci√≥n
- Cada m√≥dulo en profundidad
- Performance y security
- Troubleshooting

**√ösalo para**: Entender la arquitectura, contribuir al c√≥digo, debugging.

### 4. **[docs/MODULE_K_STATUS.md](./docs/MODULE_K_STATUS.md)** - Estado M√≥dulo K ‚≠ê **NUEVO**
Estado completo del M√≥dulo K - Certificados:
- Emisi√≥n autom√°tica de certificados PDF con @react-pdf/renderer
- Plantilla profesional landscape con bordes dobles y marca de agua
- C√≥digo de verificaci√≥n √∫nico (16 chars hex) + QR code
- Verificaci√≥n p√∫blica sin autenticaci√≥n en `/verify/[code]`
- Estados visuales claros (verde/amarillo/rojo)
- Panel de administraci√≥n con listado y acciones
- 4 endpoints REST (3 protegidos, 1 p√∫blico)
- Servicio con 6 funciones (240 l√≠neas)
- Componente template (260 l√≠neas)
- Total 1,220 l√≠neas de c√≥digo

### 5. **[docs/MODULE_J_STATUS.md](./docs/MODULE_J_STATUS.md)** - Estado M√≥dulo J
Estado completo del M√≥dulo J - Reportes:
- Dashboard ejecutivo con 15+ KPIs y 4 gr√°ficos interactivos
- Reportes por √°rea, curso, cumplimiento
- Matriz de cumplimiento con sem√°foro (üü¢üü°üî¥)
- Trazabilidad de evaluaciones con auditor√≠a
- 5 endpoints REST + 6 servicios (600+ l√≠neas)
- 4 modelos Prisma + 3 enums
- Integraci√≥n con recharts, date-fns, shadcn/ui

**√ösalo para**: Entender a fondo el sistema de reportes y anal√≠tica.

### 6. **[docs/MODULE_I_STATUS.md](./docs/MODULE_I_STATUS.md)** - Estado M√≥dulo I
Estado completo del M√≥dulo I - Notificaciones:
- Sistema de notificaciones email e in-app
- 8 tipos de eventos configurables
- Plantillas editables con 20+ variables
- Recordatorios al jefe con resumen de equipo
- 11 endpoints REST completos

**√ösalo para**: Entender a fondo el sistema de notificaciones.

### 7. **[docs/README_DOCS.md](./docs/README_DOCS.md)** - Gu√≠a de Documentaci√≥n
√çndice y gu√≠a de navegaci√≥n de toda la documentaci√≥n:
- Estado de m√≥dulos (10/10 completados ‚úÖ)
- Estructura de documentaci√≥n
- Estad√≠sticas del sistema
- C√≥mo navegar la documentaci√≥n

**√ösalo para**: Punto de entrada a toda la documentaci√≥n del proyecto.

---

### Cambio Reciente: M√≥dulo K - Certificados (Octubre 2025)

Se complet√≥ el **M√≥dulo K de Certificados** con emisi√≥n autom√°tica y verificaci√≥n p√∫blica:
- Generaci√≥n de certificados PDF profesionales con @react-pdf/renderer
- C√≥digos de verificaci√≥n √∫nicos + QR codes para autenticidad
- P√°gina de verificaci√≥n p√∫blica sin autenticaci√≥n (`/verify/[code]`)
- Panel de administraci√≥n con listado, generaci√≥n y descarga
- Plantilla landscape con dise√±o profesional (bordes dobles, marca de agua)
- 4 endpoints REST: generate, download, list, verify (1 p√∫blico)
- Ver detalles en [docs/MODULE_K_STATUS.md](./docs/MODULE_K_STATUS.md)

### Cambio Previo: M√≥dulo J - Reportes (Octubre 2025)

Se complet√≥ el **M√≥dulo J de Reportes** con anal√≠tica avanzada:
- Dashboard ejecutivo con KPIs en tiempo real
- 5 tipos de reportes: Dashboard, √Årea, Curso, Cumplimiento, Auditor√≠a
- Visualizaciones con recharts (BarChart, PieChart, AreaChart, LineChart)
- Matriz de cumplimiento con sem√°foro de tr√°fico
- Trazabilidad completa de evaluaciones con IP y timestamps
- Ver detalles en [docs/MODULE_J_STATUS.md](./docs/MODULE_J_STATUS.md)

### Cambio Previo: Inscripci√≥n Masiva (E2.2)

Se complet√≥ la funcionalidad de **inscripci√≥n masiva por filtros** en enero 2025:
- Endpoint `POST /api/enrollments/bulk` con transacciones ACID
- Modal UI `EnrollBulkDialog` con filtros de sede/√°rea/puesto
- Validaci√≥n Zod multi-capa (cliente + servidor)
- Ver detalles en [docs/MODULES.md#e22-inscripci√≥n-masiva-por-filtros](./docs/MODULES.md#e22-inscripci√≥n-masiva-por-filtros)

---

## ÔøΩüìù Convenciones de C√≥digo

### TypeScript
- Usar tipos expl√≠citos siempre que sea posible
- Evitar `any`, usar `unknown` si es necesario
- Interfaces para objetos, types para uniones

### Componentes
- Server components por defecto
- `"use client"` solo cuando sea necesario
- Extraer l√≥gica compleja a hooks personalizados

### Estilos
- Tailwind CSS para estilos
- Componentes shadcn/ui para UI consistente
- Evitar CSS personalizado cuando sea posible

### Validaci√≥n
- Zod para validaci√≥n de esquemas
- Schemas en `src/validations/`
- Reutilizar schemas entre cliente y servidor

---

## üöß Desarrollo

### Agregar una nueva p√°gina

1. Crear archivo en `src/app/nueva-ruta/page.tsx`
2. Agregar ruta al mapeo de breadcrumbs en `app-header.tsx`
3. (Opcional) Agregar link en sidebar si es necesario

### Agregar un nuevo endpoint API

1. Crear archivo en `src/app/api/nuevo-endpoint/route.ts`
2. Crear schema de validaci√≥n en `src/validations/`
3. Implementar handlers GET/POST/PUT/DELETE seg√∫n necesidad

### Agregar un componente shadcn/ui

```bash
pnpm dlx shadcn@latest add [component-name]
```

---

## ü§ù Contribuci√≥n

Las contribuciones son bienvenidas. Por favor:

1. Fork el proyecto
2. Crear una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'feat: Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abrir un Pull Request

Ver [CHANGELOG.md](./CHANGELOG.md) para historial de cambios.

---

## üìÑ Licencia

Propietario - Jorge Zavala Olivares ¬© 2025. Todos los derechos reservados.

---

## üÜò Soporte

Para soporte y preguntas:
- Email: soporte@dmh.com
- Documentaci√≥n interna: [Enlace pendiente]

---

## üôè Reconocimientos

- [Next.js](https://nextjs.org/) - Framework React
- [shadcn/ui](https://ui.shadcn.com/) - Componentes UI
- [Prisma](https://www.prisma.io/) - ORM
- [NextAuth](https://next-auth.js.org/) - Autenticaci√≥n
